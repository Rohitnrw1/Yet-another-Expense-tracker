<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Pilot</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link to the Web App Manifest (Essential for PWA/APK) -->
    <link rel="manifest" href="/app_manifest.json">
    <!-- Define Theme Color -->
    <meta name="theme-color" content="#4285F4">

    <!-- Load React and Babel for JSX compilation -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Essential for offline use: Link to Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // IMPORTANT: The path to the Service Worker file must be correct!
                navigator.serviceWorker.register('/pwabuilder-sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>

    <style>
        /* Apply the Inter font and smooth scrolling */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Load the main React application component -->
    <script type="text/babel" data-type="module" src="ExpenseManager.jsx"></script>

    <script type="text/babel">
        // Global variables for Firebase configuration (provided by the environment)
        window.__app_id = "finance-pilot-app"; // Placeholder App ID
        window.__firebase_config = '{}'; // Placeholder config (will be provided at runtime)
        window.__initial_auth_token = null; // Placeholder auth token

        const App = window.App || window.default;
        if (App) {
            const container = document.getElementById('root');
            const root = ReactDOM.createRoot(container);
            root.render(<App />);
        }
    </script>
</body>
</html>

